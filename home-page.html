<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home Page</title>
</head>
<body>
    <nav><a href="">Report Complaint</a></nav>
    <h1>Karakura Town Meetings</h1>

    <table>
        <thead>
            <tr><th>Description</th><th>Address</th><th>Time</th></tr>
        </thead>
        <tbody id="meetingTableBody">
        </tbody>
    </table>
    
</body>
<script>

    const meetingTableBody = document.getElementById("meetingTableBody");

    async function getMeetings(){
        const httpResponse = await fetch("http://localhost:8080/meetings");
        const meetings = await httpResponse.json();
        return meetings;
    }

    async function renderMeetingTable(){

        const testMeetings = await getMeetings();

        //const result=testMeetings.filter(meeting=> meeting.meetingId > 0);

        for(const meeting of result){

            const meetingRow = document.createElement("tr");

            const meetingDescData = document.createElement("td");
            meetingDescData.innerText = meeting.meetingDesc;

            const meetingAddressData = document.createElement("td");
            meetingAddressData.innerText = meeting.address;

            const meetingTimeData = document.createElement("td");
            meetingTimeData.innerText = meeting.time;

            meetingRow.appendChild(meetingDescData);
            meetingRow.appendChild(meetingAddressData);
            meetingRow.appendChild(meetingTimeData);

            meetingTableBody.appendChild(meetingRow);
        }
    }

    renderMeetingTable();

</script>
</html>